–ï–≤–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥ –∏—Å–µ—á–∫–∞ –∏–∑ –í–∞—à–µ–≥ `startup_tviibe4m_cm4.S` —Å–∞ –∫–æ–º–µ–Ω—Ç–∞—Ä–∏–º–∞ –∫–æ—ò–∏ –ø–æ–∫–∞–∑—É—ò—É –∫–∞–∫–æ —Å–µ —É `Reset_Handler` –∏–Ω–∏—Ü–∏—ò–∞–ª–∏–∑—É—ò—É —Å–µ–∫—Ü–∏—ò–µ **.data** –∏ **.bss**:

---

### –ö–æ–ø–∏—Ä–∞—ö–µ —Å–µ–∫—Ü–∏—ò–µ `.data` –∏–∑ Flash —É RAM

```asm
    ldr    r1, =__etext         /* –ò–∑–≤–æ—Ä —É Flash-—É (–∫—Ä–∞—ò .text, –ø–æ—á–µ—Ç–∞–∫ –∏–Ω–∏—Ü–∏—ò–∞–ª–∏–∑–∞—Ü–∏–æ–Ω–∏—Ö –ø–æ–¥–∞—Ç–∞–∫–∞) */
    ldr    r2, =__data_start__  /* –û–¥—Ä–µ–¥–∏—à—Ç–µ —É RAM-—É (–ø–æ—á–µ—Ç–∞–∫ .data) */
    ldr    r3, =__data_end__    /* –ö—Ä–∞—ò .data —É RAM-—É */

.L_loop1:
    cmp    r2, r3               /* –î–∞ –ª–∏ —Å–º–æ —Å—Ç–∏–≥–ª–∏ –¥–æ –∫—Ä–∞—ò–∞ .data? */
    ittt   lt
    ldrlt  r0, [r1], #4         /* –£—á–∏—Ç–∞—ò —ò–µ–¥–Ω—É —Ä–µ—á –∏–∑ Flash-–∞ */
    strlt  r0, [r2], #4         /* –ó–∞–ø–∏—à–∏ —É RAM */
    blt    .L_loop1             /* –ü–æ–Ω–∞–≤—ô–∞—ò —Å–≤–µ –¥–æ–∫ r2 < r3 */
```

‚û°Ô∏è –û–≤–∞—ò –∫–æ–¥ –æ–±–µ–∑–±–µ—í—É—ò–µ –¥–∞ –≥–ª–æ–±–∞–ª–Ω–µ –∏–Ω–∏—Ü–∏—ò–∞–ª–∏–∑–æ–≤–∞–Ω–µ –ø—Ä–æ–º–µ–Ω—ô–∏–≤–µ (–Ω–ø—Ä. `int counter = 123;`) –¥–æ–±–∏—ò—É —Å–≤–æ—ò–µ –ø–æ—á–µ—Ç–Ω–µ –≤—Ä–µ–¥–Ω–æ—Å—Ç–∏ —É RAM-—É.

---

### –ù—É–ª–∏—Ä–∞—ö–µ —Å–µ–∫—Ü–∏—ò–µ `.bss`

```asm
    ldr    r1, =__bss_start__   /* –ü–æ—á–µ—Ç–∞–∫ .bss —É RAM-—É */
    ldr    r2, =__bss_end__     /* –ö—Ä–∞—ò .bss —É RAM-—É */

    movs   r0, 0                /* –ü—Ä–∏–ø—Ä–µ–º–∏ –Ω—É–ª—É –∑–∞ —É–ø–∏—Å */
.L_loop3:
    cmp    r1, r2               /* –î–∞ –ª–∏ —Å–º–æ —Å—Ç–∏–≥–ª–∏ –¥–æ –∫—Ä–∞—ò–∞ .bss? */
    itt    lt
    strlt  r0, [r1], #4         /* –ó–∞–ø–∏—à–∏ –Ω—É–ª—É —É RAM */
    blt    .L_loop3             /* –ü–æ–Ω–∞–≤—ô–∞—ò —Å–≤–µ –¥–æ–∫ r1 < r2 */
```

‚û°Ô∏è –û–≤–æ —ò–µ —Ä—É—Ç–∏–Ω–∞ –∫–æ—ò–∞ –ø–æ–ø—É—ö–∞–≤–∞ `.bss` –Ω—É–ª–∞–º–∞, –Ω–∞ –æ—Å–Ω–æ–≤—É —Å–∏–º–±–æ–ª–∞ –∫–æ—ò–µ —ò–µ –ª–∏–Ω–∫–µ—Ä –¥–µ—Ñ–∏–Ω–∏—Å–∞–æ —É `linker.ld` (`__bss_start__` –∏ `__bss_end__`).

---

### –ù–∞–∫–æ–Ω —Ç–æ–≥–∞

–ü–æ—Å–ª–µ –∏–Ω–∏—Ü–∏—ò–∞—Ü–∏—ò–µ `.data` –∏ `.bss`, –∫–æ–¥ –∞–∂—É—Ä–∏—Ä–∞ VTOR —Ä–µ–≥–∏—Å—Ç–∞—Ä (–ø–æ–º–µ—Ä–∞—ö–µ –≤–µ–∫—Ç–æ—Ä—Å–∫–µ —Ç–∞–±–µ–ª–µ —É RAM –∞–∫–æ —ò–µ –ø–æ—Ç—Ä–µ–±–Ω–æ), –æ–º–æ–≥—É—õ–∞–≤–∞ FPU –∞–∫–æ –ø–æ—Å—Ç–æ—ò–∏, –ø–æ–∑–∏–≤–∞ `SystemInit()`, —Å—Ç–∞—Ç–∏—á–∫–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ, –∏ –Ω–∞ –∫—Ä–∞—ò—É —É–ª–∞–∑–∏ —É `main()`.

---

üìå –î–∞–∫–ª–µ, –Ω–∞ –í–∞—à–µ –ø–∏—Ç–∞—ö–µ ‚Äû–∫–∞–∫–æ –ø—Ä–æ–≥—Ä–∞–º –∑–Ω–∞ –¥–∞ —Ç—Ä–µ–±–∞ –¥–∞ —Ä–µ–∑–µ—Ä–≤–∏—à–µ –∏ –Ω—É–ª–∏—Ä–∞ RAM‚Äú:

* –ª–∏–Ω–∫–µ—Ä—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞ –∫—Ä–µ–∏—Ä–∞ —Å–∏–º–±–æ–ª–µ `__data_start__/end__`, `__bss_start__/end__`;
* —É ELF-—É –ø–æ—Å—Ç–æ—ò–∏ –º–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—ò–∞ –æ –≤–µ–ª–∏—á–∏–Ω–∏ —Å–µ–∫—Ü–∏—ò–∞;
* `Reset_Handler` —É startup –∫–æ–¥—É –∫–æ—Ä–∏—Å—Ç–∏ —Ç–µ —Å–∏–º–±–æ–ª–µ –¥–∞ –∏–∑–≤—Ä—à–∏ –∫–æ–ø–∏—Ä–∞—ö–µ –∏ –Ω—É–ª–∏—Ä–∞—ö–µ —É RAM-—É.

---

–ï–≤–æ —ò–µ–¥–Ω–æ–≥ —ò–∞—Å–Ω–æ–≥ **ASCII –¥–∏—ò–∞–≥—Ä–∞–º–∞ —Ä–∞—Å–ø–æ—Ä–µ–¥–∞ RAM –º–µ–º–æ—Ä–∏—ò–µ** –∑–∞ Cortex-M (—Ç–∏–ø–∏—á–Ω–æ –∑–∞ CYT2BL5CAS), –∫–æ—ò–∏ –ø—Ä–∏–∫–∞–∑—É—ò–µ –≥–¥–µ —Å–µ —Å–º–µ—à—Ç–∞—ò—É —Ä–∞–∑–ª–∏—á–∏—Ç–µ –≤—Ä—Å—Ç–µ –ø—Ä–æ–º–µ–Ω—ô–∏–≤–∏—Ö –∏ –∫–∞–∫–æ —Ä–∞—Å—Ç—É —Å—Ç–µ–∫ –∏ heap:

---

## üìå –†–∞—Å–ø–æ—Ä–µ–¥ RAM-–∞

```
–í–∏—Å–æ–∫–µ –∞–¥—Ä–µ—Å–µ RAM-–∞
+---------------------------+  ‚Üê __StackTop (–∏–Ω–∏—Ü–∏—ò–∞–ª–Ω–∞ –≤—Ä–µ–¥–Ω–æ—Å—Ç SP)
|         –°–¢–ï–ö              |  ‚Üê –ª–æ–∫–∞–ª–Ω–µ –ø—Ä–æ–º–µ–Ω—ô–∏–≤–µ —Ñ—É–Ω–∫—Ü–∏—ò–∞, –ø–æ–≤—Ä–∞—Ç–Ω–µ –∞–¥—Ä–µ—Å–µ
|         —Ä–∞—Å—Ç–µ –Ω–∞–Ω–∏–∂–µ ‚Üì    |
|                           |
|   (–ø—Ä–∞–∑–∞–Ω –ø—Ä–æ—Å—Ç–æ—Ä)         |
|                           |
|         —Ä–∞—Å—Ç–µ –Ω–∞–≥–æ—Ä–µ ‚Üë    |  ‚Üê heap (malloc/free)
|           HEAP             |
+---------------------------+
|           .bss             |  ‚Üê –≥–ª–æ–±–∞–ª–Ω–µ/—Å—Ç–∞—Ç–∏—á–∫–µ –Ω–µ–∏–Ω–∏—Ü–∏—ò–∞–ª–∏–∑–æ–≤–∞–Ω–µ –ø—Ä–æ–º–µ–Ω—ô–∏–≤–µ
|                            |     (–∏–Ω–∏—Ü–∏—ò–∞–ª–∏–∑–æ–≤–∞–Ω–µ –Ω–∞ 0 —É startup –∫–æ–¥—É)
+---------------------------+
|           .data            |  ‚Üê –≥–ª–æ–±–∞–ª–Ω–µ/—Å—Ç–∞—Ç–∏—á–∫–µ –∏–Ω–∏—Ü–∏—ò–∞–ª–∏–∑–æ–≤–∞–Ω–µ –ø—Ä–æ–º–µ–Ω—ô–∏–≤–µ
|                            |     (–≤—Ä–µ–¥–Ω–æ—Å—Ç–∏ –∫–æ–ø–∏—Ä–∞–Ω–µ –∏–∑ Flash-–∞ –ø—Ä–∏ reset-—É)
+---------------------------+
|           .rodata          |  ‚Üê –∫–æ–Ω—Å—Ç–∞–Ω—Ç–µ (read-only data, –∞–∫–æ —Å–µ –º–∞–ø–∏—Ä–∞—ò—É —É RAM)
+---------------------------+
|         (–¥—Ä—É–≥–∏ —Å–µ–≥–º–µ–Ω—Ç–∏)   |
+---------------------------+  ‚Üê __data_start__, __bss_start__
–ù–∏—Å–∫–µ –∞–¥—Ä–µ—Å–µ RAM-–∞
```

---

## üìù –û–±—ò–∞—à—ö–µ—ö–µ

* **.data** ‚Üí –≥–ª–æ–±–∞–ª–Ω–µ –∏ —Å—Ç–∞—Ç–∏—á–∫–µ –∏–Ω–∏—Ü–∏—ò–∞–ª–∏–∑–æ–≤–∞–Ω–µ –ø—Ä–æ–º–µ–Ω—ô–∏–≤–µ (`int counter = 123;`).
* **.bss** ‚Üí –≥–ª–æ–±–∞–ª–Ω–µ –∏ —Å—Ç–∞—Ç–∏—á–∫–µ –Ω–µ–∏–Ω–∏—Ü–∏—ò–∞–ª–∏–∑–æ–≤–∞–Ω–µ –ø—Ä–æ–º–µ–Ω—ô–∏–≤–µ (`int buffer[1000];`).
* **HEAP** ‚Üí –ø—Ä–æ—Å—Ç–æ—Ä –∑–∞ –¥–∏–Ω–∞–º–∏—á–∫—É –∞–ª–æ–∫–∞—Ü–∏—ò—É (`malloc`, `calloc`). –†–∞—Å—Ç–µ **–Ω–∞–≥–æ—Ä–µ**.
* **STACK** ‚Üí –ª–æ–∫–∞–ª–Ω–µ –ø—Ä–æ–º–µ–Ω—ô–∏–≤–µ —É–Ω—É—Ç–∞—Ä —Ñ—É–Ω–∫—Ü–∏—ò–∞. –†–∞—Å—Ç–µ **–Ω–∞–¥–æ–ª–µ**, –æ–¥ –≤—Ä—Ö–∞ RAM-–∞ –∫–∞ –Ω–∏–∂–∏–º –∞–¥—Ä–µ—Å–∞–º–∞.
* –ò–∑–º–µ—í—É heap-–∞ –∏ stack-–∞ –ø–æ—Å—Ç–æ—ò–∏ ‚Äû—Å–ª–æ–±–æ–¥–Ω–∞ –∑–æ–Ω–∞‚Äú; –∞–∫–æ —Å–µ —Å—É—Å—Ä–µ—Ç–Ω—É ‚Üí **heap/stack collision** (–∫–ª–∞—Å–∏—á–∞–Ω –Ω–∞—á–∏–Ω –ø—É—Ü–∞—ö–∞ –ø—Ä–æ–≥—Ä–∞–º–∞).

---

üëâ –û–≤–∞–∫–æ –ø–æ—Å—Ç–∞–≤—ô–µ–Ω —Ä–∞—Å–ø–æ—Ä–µ–¥ –æ–±–µ–∑–±–µ—í—É—ò–µ –¥–∞ –≥–ª–æ–±–∞–ª–Ω–µ/—Å—Ç–∞—Ç–∏—á–∫–µ –ø—Ä–æ–º–µ–Ω—ô–∏–≤–µ –∏–º–∞—ò—É —Ñ–∏–∫—Å–Ω–µ –∞–¥—Ä–µ—Å–µ, –¥–æ–∫ —Å—É –ª–æ–∫–∞–ª–Ω–µ –ø—Ä–æ–º–µ–Ω—ô–∏–≤–µ —Ñ–ª–µ–∫—Å–∏–±–∏–ª–Ω–µ –∏ –∫—Ä–µ–∏—Ä–∞—ò—É —Å–µ/–æ—Å–ª–æ–±–∞—í–∞—ò—É –∞—É—Ç–æ–º–∞—Ç—Å–∫–∏ –ø—Ä–∏ —É–ª–∞—Å–∫—É/–∏–∑–ª–∞—Å–∫—É –∏–∑ —Ñ—É–Ω–∫—Ü–∏—ò–∞.

---

–•–æ—õ–µ—Ç–µ –ª–∏ –¥–∞ –í–∞–º –Ω–∞–ø—Ä–∞–≤–∏–º –∏ **–∫–æ–Ω–∫—Ä–µ—Ç–∞–Ω –ø—Ä–∏–º–µ—Ä —É GCC-—É** (—Å–∞ C –∫–æ–¥–æ–º –∏ `arm-none-eabi-nm` –∏–∑–ª–∞–∑–æ–º), –¥–∞ –≤–∏–¥–∏—Ç–µ —Ç–∞—á–Ω–µ –∞–¥—Ä–µ—Å–µ —ò–µ–¥–Ω–µ –≥–ª–æ–±–∞–ª–Ω–µ, —ò–µ–¥–Ω–µ —Å—Ç–∞—Ç–∏—á–∫–µ –∏ —ò–µ–¥–Ω–µ –ª–æ–∫–∞–ª–Ω–µ –ø—Ä–æ–º–µ–Ω—ô–∏–≤–µ?
